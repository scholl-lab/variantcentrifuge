---
milestone: v0.16.0
audited: 2026-02-26T10:00:00Z
status: tech_debt
scores:
  requirements: 30/31 satisfied (10 deferred, 1 excluded)
  phases: 6/6 completed (2 deferred)
  integration: 14/14 connections verified
  flows: 5/5 E2E flows complete
gaps: []
tech_debt:
  - phase: 31-coast-fix
    items:
      - "COAST-02 auto-field injection required post-verification fix (commit 5641221) — now working"
  - phase: 34-tech-debt
    items:
      - "docs/source/guides/association_testing.md line 334 lists skat_pvalue but default output is skat_o_pvalue (SKAT-O is default method)"
  - phase: 37-association-resource-management
    items:
      - "Pre-existing TODO(12-02) in analysis_stages.py line 760 — unrelated to v0.16.0"
---

# v0.16.0 Milestone Audit Report

**Milestone:** v0.16.0 Association Hardening & Multi-Cohort Features
**Audited:** 2026-02-26
**Status:** All requirements met, minor tech debt

## Phase Summary

| Phase | Status | Score | Verified |
|-------|--------|-------|----------|
| 30. Dead Code Cleanup | Passed | 4/4 | 2026-02-23 |
| 31. COAST Fix | Passed (post-fix) | 5/5 | 2026-02-23 |
| 32. Region Restriction & PCA Wiring | Passed | 4/4 | 2026-02-23 |
| 33. Gene-Level FDR Weighting | Passed | 8/8 | 2026-02-24 |
| 34. Tech Debt | Passed | 4/4 | 2026-02-24 |
| 35. Case-Confidence Weights | **Deferred** | — | — |
| 36. Sparse Genotype Matrices | **Deferred** | — | — |
| 37. Resource Management & Streaming | Passed | 4/4 | 2026-02-25 |

## Requirements Traceability

### Satisfied (30/31 mapped requirements)

| Requirement | Phase | Status |
|-------------|-------|--------|
| COAST-01: GT matrix available for regression tests | 31 | Satisfied |
| COAST-02: SIFT/PolyPhen auto-injected for COAST | 31 | Satisfied (post-verification fix) |
| COAST-03: Partial-category fallback | 31 | Satisfied |
| COAST-04: &-concatenated effect strings | 31 | Satisfied |
| COAST-05: --coast-classification CLI option | 31 | Satisfied |
| COAST-06: scoring/coast_classification/ config | 31 | Satisfied |
| COAST-07: Multi-transcript resolution | 31 | Satisfied |
| FDR-01: --gene-prior-weights CLI flag | 33 | Satisfied |
| FDR-02: Weighted BH with renormalization | 33 | Satisfied |
| FDR-03: Missing genes get weight=1.0 | 33 | Satisfied |
| FDR-05: Effective number of tests in diagnostics | 33 | Satisfied |
| FDR-06: No weights = plain BH (backward compat) | 33 | Satisfied |
| REGION-01: --regions-bed CLI flag | 32 | Satisfied |
| REGION-02: BED intersection via bedtools | 32 | Satisfied |
| REGION-03: Chromosome mismatch detection | 32 | Satisfied |
| REGION-04: Intersection before chunk splitting | 32 | Satisfied |
| PCA-01: PCAComputationStage in pipeline | 32 | Satisfied |
| PCA-02: PCA eigenvectors to AssociationAnalysisStage | 32 | Satisfied |
| PCA-03: --pca akt runs AKT subprocess | 32 | Satisfied |
| CLEAN-01: 8 dead stage classes removed | 30 | Satisfied |
| CLEAN-02: Registry calls removed | 30 | Satisfied |
| CLEAN-03: Imports and __all__ cleaned | 30 | Satisfied |
| CLEAN-04: "refactored_pipeline" strings replaced | 30 | Satisfied |
| CLEAN-05: "Old pipeline" comments removed | 30 | Satisfied |
| CLEAN-06: "Refactored" docstrings updated | 30 | Satisfied |
| TD-02: create_stages_from_config mapping fixed | 34 | Satisfied |
| TD-03: COAST R golden values for regression | 34 | Satisfied |
| TD-04: skat_o_pvalue column naming | 34 | Satisfied |
| TD-05: Fisher lambda_GC exemption documented | 34 | Satisfied |
| TD-06: Checkpoint strings replaced | 30 | Satisfied (same as CLEAN-04) |

### Excluded (1)

| Requirement | Reason |
|-------------|--------|
| FDR-04: IHW via rpy2 | Excluded per project decision — no Python IHW implementation exists |

### Deferred (10 — Phases 35 + 36)

| Requirement | Phase | Reason |
|-------------|-------|--------|
| CONF-01 through CONF-07 | 35 | HPO count mode needs HPO infrastructure; file-only mode too narrow |
| PERF-01 through PERF-03 | 36 | Phase 37 streaming solves OOM; centering destroys sparsity for SKAT |

## Cross-Phase Integration

Integration checker verified **14 cross-phase connections**, **0 gaps**, **0 broken flows**.

| Connection | Status |
|-----------|--------|
| Phase 30 (dead code) → Phase 32 (PCAComputationStage reimplemented) | Verified |
| Phase 31 (COAST fix) → Phase 34 (golden values use fixed implementation) | Verified |
| Phase 31 (COAST classification) → Phase 37 (streaming matrix builder) | Verified |
| Phase 32 (PCA covariates) → Phase 33 (FDR weights) — orthogonal axes | Verified |
| Phase 32 (region restriction) → Phase 37 (ResourceManager) — independent stages | Verified |
| Phase 33 (FDR weighting) → Phase 34 (column naming convention) | Verified |
| Phase 37 (_GenotypeMatrixBuilder) → Phase 31 (COAST receives matrices) | Verified |

## E2E User Flows

| Flow | Status |
|------|--------|
| `--association-tests coast --coast-classification sift_polyphen` | Complete |
| `--association-tests skat --gene-prior-weights weights.tsv` | Complete |
| `--pca akt --association-tests coast,skat,burden` | Complete |
| `--regions-bed capture_kit.bed --association-tests coast` | Complete |
| Full pipeline with all features combined | Complete |

## Test Results

```
2092 passed, 3 skipped, 0 failures
```

The 3 skipped tests are pre-existing fixture-missing tests for comprehensive gene burden data (unrelated to v0.16.0).

## Tech Debt

### Phase 31: COAST Fix
- COAST-02 auto-field injection required a post-verification fix (commit 5641221). The `vcf_fields` key was added to `variable_assignment_config.json` files and `cli.py` injection was updated. Now fully working and tested on GCKD cohort.

### Phase 34: Tech Debt
- `docs/source/guides/association_testing.md` line 334 lists `skat_pvalue` as the SKAT output column, but the actual default output is `skat_o_pvalue` (since SKAT-O is the default method). Pre-existing documentation nuance, not a blocker.

### Pre-existing
- `analysis_stages.py` line 760: `TODO(12-02)` — pre-existing, unrelated to v0.16.0 work.

---

*Audited: 2026-02-26*
*Integration checker: 14/14 connections, 5/5 E2E flows*
